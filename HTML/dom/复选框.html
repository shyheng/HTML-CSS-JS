<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>复选框的全选和取消全选</title>
</head>

<body>
	<script type="text/javascript">
	window.onload = function(){
		var firs = document.getElementById("first");
		var aihaos =  document.getElementsByName("aihao");
		 firs.onclick = function(){
			for(var i = 0; i < aihaos.length; i++){
				aihaos[i].checked = firs.checked;
				
			}
		}
		// 对以上数组进行遍历
		var all = aihaos.length;
		
		for(var i =0; i<aihaos.length; i++){
			aihaos[i].onclick = function(){
				var vheckercont = 0;
				// 总数和选中数量相等的时候，第一个复选框选中
				for(var i = 0; i<aihaos.length;i++){
					if(aihaos[i].checked){
						vheckercont++;
					}
				}
				firs.checked = (all == vheckercont);
				/* if(all == vheckercont){
					firs.checked = true;
				}else{
					firs.checked = false;
			 } */
		 }
	   }
	}
	</script>
	<input type="checkbox" id="first"/><br>
	<input type="checkbox" name="aihao" value="smok"/>抽烟<br>
	<input type="checkbox" name="aihao" value="drink"/>喝酒<br>
	<input type="checkbox" name="aihao" value="tt"/>烫头<br>
</body>
</html>
